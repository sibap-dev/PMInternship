<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM Internship Scheme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=work" />
    <style>
/* Add these new styles to your existing CSS */

/* Voice Input Button Styles */
.voice-input-btn {
    position: absolute;
    right: 62px;
    top: 50%;
    transform: translateY(-50%);
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
    border: none;
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    transition: all 0.2s ease;
    z-index: 10;
    box-shadow: 0 2px 6px rgba(26, 79, 142, 0.2);
}

.voice-input-btn:hover {
    transform: translateY(-50%) scale(1.05);
    box-shadow: 0 4px 12px rgba(26, 79, 142, 0.3);
}

.voice-input-btn.recording {
    background: linear-gradient(135deg, #ff4444 0%, #cc3333 100%);
    animation: pulse-record 1.5s infinite;
}

.voice-input-btn.processing {
    background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
    animation: spin 1s linear infinite;
}

/* Voice Recording Animation */
@keyframes pulse-record {
    0%, 100% { 
        transform: translateY(-50%) scale(1); 
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    50% { 
        transform: translateY(-50%) scale(1.1); 
        box-shadow: 0 4px 12px rgba(255, 68, 68, 0.4);
    }
}

@keyframes spin {
    0% { transform: translateY(-50%) rotate(0deg); }
    100% { transform: translateY(-50%) rotate(360deg); }
}

/* Voice Status Indicator */
.voice-status {
    position: absolute;
    bottom: 70px;
    right: 30px;
    background: rgba(26, 79, 142, 0.9);
    color: white;
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 12px;
    display: none;
    z-index: 1002;
    animation: slideInUp 0.3s ease-out;
}

.voice-status.show {
    display: block;
}

/* Adjust input area for voice button */
.chat-input-area {
    position: relative;
}

.chat-input-area input {
    padding-right: 116px; /* Make space for both buttons with proper spacing */
}

/* Language support indicator */
.lang-indicator {
    position: absolute;
    top: -25px;
    right: 0;
    font-size: 10px;
    color: #666;
    background: #f0f0f0;
    padding: 2px 6px;
    border-radius: 10px;
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        

        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
            padding: 15px 30px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Add padding to body to account for fixed header */
        body {
            background-color: #f5f9ff;
            color: #333;
            padding-top: 80px; /* Adjust this value based on your header height */
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            margin-left: 60px; /* Make space for hamburger */
        }
        
        .logo {
            height: 50px;
            width: auto;
        }

        .logo1 {
            height: 50px;
            width: auto;
            margin-left: 20px; /* Instead of absolute positioning */
            position: static; /* Remove absolute positioning */
        }
        
        .nav-items {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-left: auto; /* This will push the nav items to the right */
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }
        
        .nav-item:hover {
            color: #ffcc00;
            transform: translateY(-2px);
        }
        
        /* Language Selector Styles */
        .language-selector {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .language-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .language-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .language-options {
            position: absolute;
            top: 100%;
            right: 0;
            min-width: 160px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid #ddd;
            display: none;
            z-index: 9999;
            margin-top: 10px;
            padding: 8px 0;
        }

        .language-options.show {
            display: block !important;
        }

        .language-option {
            display: flex;
            align-items: center;
            padding: 10px 16px;
            color: #333;
            text-decoration: none;
            gap: 8px;
            transition: background-color 0.3s ease;
        }

        .language-option:hover {
            background-color: #f5f5f5;
            text-decoration: none;
            color: #333;
        }

        .language-option img {
            width: 20px;
            height: 20px;
            border-radius: 2px;
            object-fit: cover;
        }
        
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
        }
        
        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: white;
            border-radius: 2px;
        }
        
        /* User Profile Section */
        .profile-container {
            position: relative;
            width: 100%;
            padding-top: 20px;
        }
        
        .user-profile {
            position: fixed;
            left: -300px; /* Hide by default */
            top: 80px;
            height: calc(100vh - 80px);
            width: 300px;
            background: white;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            transition: left 0.3s ease;
            z-index: 1000;
        }
        
        .user-profile.active {
            left: 0;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .profile-pic {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(45deg, #2a6bb3, #1a4f8e);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        
        .profile-info h3 {
            color: #1a4f8e;
            margin-bottom: 5px;
        }
        
        .profile-info p {
            color: #666;
            font-size: 14px;
        }
        
        .profile-menu {
            list-style: none;
            margin-top: 20px;
        }
        
        .profile-menu li {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .profile-menu a {
            color: #444;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .profile-menu a:hover {
            color: #2a6bb3;
            padding-left: 5px;
        }
        
        /* Main Content Layout */
        .main-content {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Hero Banner */
        .hero-banner {
            width: 90%;
            max-width: 1000px;
            margin: 20px auto;
            min-height: 300px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .hero-banner h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .hero-banner p {
            font-size: 1.2rem;
            max-width: 600px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .btn {
            display: inline-block;
            background: #ffcc00;
            color: #1a4f8e;
            padding: 12px 25px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            background: #ffd633;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* Enhanced Eligibility Section */
.eligible-section {
    width: 90%;
    max-width: 1200px;
    margin: 40px auto;
    padding: 40px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
}

.section-title {
    text-align: center;
    margin-bottom: 40px;
    color: #1a4f8e;
    font-size: 2.2rem;
    font-weight: 600;
    position: relative;
    padding-bottom: 15px;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, #1a4f8e, #2a6bb3);
    border-radius: 2px;
}

.eligibility-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    justify-content: center;
}

.card {
    background: white;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    border: 1px solid #eef2f7;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    border-color: #2a6bb3;
}

.card img {
    width: 100px;
    height: 100px;
    margin-bottom: 25px;
    transition: transform 0.3s ease;
}

.card:hover img {
    transform: scale(1.1);
}

.card h6 {
    color: #1a4f8e;
    font-size: 1.3rem;
    margin-bottom: 15px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.card p {
    color: #555;
    line-height: 1.6;
    margin-bottom: 15px;
}

.card ul {
    list-style: none;
    padding: 0;
    margin: 0;
    width: 100%;
}

.card li {
    padding: 12px 0;
    border-bottom: 1px dashed #e0e0e0;
    color: #444;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.card li:last-child {
    border-bottom: none;
}

.card li:before {
    content: "✓";
    color: #2a6bb3;
    font-weight: bold;
}

/* Card-specific styles */
#agesz, #jobsz {
    width: 100%;
    text-align: center;
}

#agesz h3, #jobsz h3 {
    color: #1a4f8e;
    font-size: 1.3rem;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

/* Footer */
.footer {
    background: #1a4f8e;
    color: white;
    padding: 40px 30px;
    margin-top: 50px;
}
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            justify-content: space-between;
        }
        
        .footer-column {
            flex: 1;
            min-width: 200px;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #3a7bc8;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: #ffcc00;
            padding-left: 5px;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid #3a7bc8;
            color: #ccc;
            font-size: 0.9rem;
        }
        
        /* Chatbot */
        .chatbot {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .chatbot:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        /* Profile Toggle Button */
        .profile-toggle {
            position: absolute;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-right: 15px;
            z-index: 1001;
        }

        .profile-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Chatbot Styles - Add to your existing <style> section */

/* Notification badge for chatbot button */
.notification-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #ff4444;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 12px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pulse 2s infinite;
}

/* Chat Window */
.chat-window {
    display: none;
    position: fixed;
    bottom: 100px;
    right: 30px;
    width: 380px;
    height: 500px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    flex-direction: column;
    z-index: 1001;
    border: 1px solid #e0e0e0;
    animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Chat Header */
.chat-header {
    background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
    color: white;
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.chat-header-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.bot-avatar {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

.bot-details {
    display: flex;
    flex-direction: column;
}

.bot-name {
    font-weight: 600;
    font-size: 16px;
}

.bot-status {
    font-size: 12px;
    opacity: 0.8;
}

.chat-controls {
    display: flex;
    gap: 8px;
    align-items: center;
}

.speech-toggle-btn {
    background: none;
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
    padding: 8px;
    border-radius: 6px;
    transition: all 0.2s ease;
    position: relative;
}

.speech-toggle-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

.speech-toggle-btn.speaking {
    color: #ffeb3b;
    animation: pulse 1s infinite;
}

.speech-toggle-btn.muted {
    color: #f44336;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.close-chat-btn {
    background: none;
    border: none;
    color: white;
    font-size: 18px;
    cursor: pointer;
    padding: 8px;
    border-radius: 6px;
    transition: background 0.2s ease;
}

.close-chat-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Messages Area */
.chat-messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: #f8f9fa;
    max-height: 300px;
}

.message {
    max-width: 85%;
    animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.user-message {
    align-self: flex-end;
}

.bot-message {
    align-self: flex-start;
}

.message-content {
    padding: 12px 16px;
    border-radius: 18px;
    margin-bottom: 4px;
    white-space: pre-wrap;
    line-height: 1.4;
    font-size: 14px;
}

.user-message .message-content {
    background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
    color: white;
    border-bottom-right-radius: 6px;
}

.bot-message .message-content {
    background: white;
    color: #333;
    border: 1px solid #e0e0e0;
    border-bottom-left-radius: 6px;
}

.message-time {
    font-size: 11px;
    color: #666;
    margin-left: 12px;
}

.user-message .message-time {
    text-align: right;
    margin-right: 12px;
    margin-left: 0;
}

/* Typing Indicator */
.typing-indicator {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 12px 16px;
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 18px;
    margin-bottom: 4px;
}

.typing-dot {
    width: 8px;
    height: 8px;
    background: #666;
    border-radius: 50%;
    animation: typing 1.4s infinite;
}

.typing-dot:nth-child(2) {
    animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typing {
    0%, 60%, 100% {
        transform: translateY(0);
    }
    30% {
        transform: translateY(-6px);
    }
}

/* Quick Replies */
.quick-replies {
    padding: 16px 20px 0;
    display: flex;
    gap: 8px;
    overflow-x: auto;
    background: white;
}

.quick-reply-btn {
    background: #f1f3f4;
    border: 1px solid #e0e0e0;
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 12px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s ease;
    color: #333;
}

.quick-reply-btn:hover {
    background: #e8f0fe;
    border-color: #1a4f8e;
    color: #1a4f8e;
}

/* Input Area */
.chat-input-area {
    display: flex;
    padding: 12px 16px;
    gap: 8px;
    align-items: center;
    background: white;
    border-top: 1px solid #e0e0e0;
    position: relative;
}

.chat-input-area input {
    flex: 1;
    border: 2px solid #e0e0e0;
    border-radius: 25px;
    padding: 12px 16px;
    font-size: 14px;
    outline: none;
    transition: all 0.15s ease;
    background: #fafafa;
}

.chat-input-area input:focus {
    border-color: #1a4f8e;
    background: white;
    box-shadow: 0 0 0 3px rgba(26, 79, 142, 0.1);
}

.send-btn {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(26, 79, 142, 0.25);
    min-width: 40px;
    flex-shrink: 0;
}

.send-btn:hover {
    transform: scale(1.08);
    box-shadow: 0 4px 16px rgba(26, 79, 142, 0.35);
}

.voice-input-btn {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #2e7d32 0%, #4caf50 100%);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(46, 125, 50, 0.25);
    min-width: 40px;
    flex-shrink: 0;
}

.voice-input-btn:hover {
    transform: scale(1.08);
    box-shadow: 0 4px 16px rgba(46, 125, 50, 0.35);
}

.voice-input-btn.listening {
    background: linear-gradient(135deg, #d32f2f 0%, #f44336 100%);
    animation: pulse-mic 0.8s infinite;
    box-shadow: 0 0 20px rgba(244, 67, 54, 0.4);
}

.voice-input-btn.processing {
    background: linear-gradient(135deg, #ff9800 0%, #ffc107 100%);
    animation: spin 0.8s linear infinite;
}

@keyframes pulse-mic {
    0% { transform: scale(1); box-shadow: 0 0 20px rgba(244, 67, 54, 0.4); }
    50% { transform: scale(1.12); box-shadow: 0 0 25px rgba(244, 67, 54, 0.6); }
    100% { transform: scale(1); box-shadow: 0 0 20px rgba(244, 67, 54, 0.4); }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

/* Media Queries */
@media (max-width: 768px) {
    .logo-container {
        margin-left: 50px;
    }

    .logo, .logo1 {
        height: 40px;
    }

    .profile-toggle {
        width: 35px;
        height: 35px;
        left: 15px;
    }
}

@media (max-width: 576px) {
    .header {
        padding: 10px 15px;
    }

    .logo-container {
        margin-left: 45px;
    }

    .logo, .logo1 {
        height: 35px;
    }
}

/* Mobile Responsive */
@media (max-width: 480px) {
    .chat-window {
        width: 350px;
        height: 450px;
        right: 15px;
        bottom: 85px;
    }
    
    .chatbot {
        bottom: 20px;
        right: 20px;
        width: 55px;
        height: 55px;
        font-size: 22px;
    }
}

@media (max-width: 400px) {
    .chat-window {
        width: 320px;
        right: 10px;
    }
}

@media (max-width: 992px) {
    .hero-banner {
        width: 95%;
        padding: 30px 20px;
    }

    .eligible-section {
        width: 95%;
        padding: 20px;
    }

    .nav-items {
        gap: 15px;
    }

    .nav-item span {
        font-size: 14px;
    }
}

@media (max-width: 768px) {
    .hero-banner {
        min-height: 250px;
    }

    .eligibility-cards {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .nav-items {
        position: absolute;
        top: 100%;
        right: 0;
        flex-direction: column;
        background: linear-gradient(135deg, #1a4f8e 0%, #2a6bb3 100%);
        padding: 20px;
        display: none;
        width: 200px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .nav-item {
        width: 100%;
        padding: 10px 0;
    }

    .hamburger {
        display: flex;
        margin-left: auto;
    }
}

@media (max-width: 576px) {
    .hero-banner {
        padding: 20px 15px;
    }

    .eligible-section {
        padding: 15px;
    }
    
    /* Adjust voice button for mobile */
    .voice-input-btn {
        right: 58px;
        width: 34px;
        height: 34px;
    }
    
    .chat-input-area input {
        padding-right: 110px;
    }
}
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <button class="profile-toggle" id="profileToggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="logo-container">
            <img src="static/images/mca_logo_1.svg" alt="Official Logo" class="logo">
            <img src="static/images/pm_internship_logo_eng.svg" alt="Official Logo" class="logo1">
        </div>
        
        <nav class="nav-items">
            <a href="#" class="nav-item">
                <i class="fas fa-question-circle"></i>
                <span>{{ t('nav.faqs') }}</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-book"></i>
                <span>{{ t('nav.guidelines') }}</span>
            </a>
            <div class="language-selector">
                <button type="button" class="language-btn" onclick="toggleLanguageDropdown()">
                    <i class="fas fa-globe"></i>
                    <span>
                        {% if session.get('language') == 'hi' %}
                            हिंदी
                        {% elif session.get('language') == 'mr' %}
                            मराठी
                        {% else %}
                            English
                        {% endif %}
                    </span>
                </button>
                <div class="language-options" id="languageDropdown">
                    <a href="/language/en" class="language-option">English</a>
                    <a href="/language/hi" class="language-option">हिंदी</a>
                    <a href="/language/mr" class="language-option">मराठी</a>
                </div>
            </div>
            <a href="{{ url_for('profile') }}" class="nav-item">
                <i class="fas fa-user"></i>
                <span>{{ t('nav.profile') }}</span>
            </a>
            <a href="{{ url_for('logout') }}" class="nav-item">
                <i class="fas fa-sign-out-alt"></i>
                <span>{{ t('nav.logout') }}</span>
            </a>
        </nav>
        
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <!-- Profile and Main Content Section -->
    <div class="profile-container">
        <!-- Sidebar -->
        <aside class="user-profile">
            <div class="profile-header">
                <div class="profile-pic">{{ user_initials or 'U' }}</div>
                <div class="profile-info">
                    <h3>{{ user_name or 'User Name' }}</h3>
                    <p>{{ user_email or 'user@email.com' }}</p>
                </div>
            </div>
            
            <ul class="profile-menu">
                <li><a href="{{ url_for('profile') }}"><i class="fas fa-user-circle"></i> {{ t('sidebar.myProfile') }}</a></li>
                <li><a href="#"><i class="fas fa-file-alt"></i> {{ t('sidebar.myApplications') }}</a></li>
                <li><a href="{{url_for('recommendations') }}"><i class="fas fa-briefcase"></i> {{ t('sidebar.internshipOpportunities') }}</a></li>
                <li><a href="{{ url_for('ats') }}"><i class="fas fa-search"></i> {{ t('sidebar.atsMatching') }}</a></li>
                <li><a href="#"><i class="fas fa-calendar-alt"></i> {{ t('sidebar.importantDates') }}</a></li>
                <li><a href="#"><i class="fas fa-download"></i> {{ t('sidebar.downloads') }}</a></li>
                <li><a href="#"><i class="fas fa-cog"></i> {{ t('sidebar.settings') }}</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Hero Banner with Dynamic Welcome Message -->
            <section class="hero-banner">
                <h1>{{ t('hero.welcomeTitle') }}, {{ user_name.split()[0] if user_name else 'User' }}!</h1>
                <p>{{ t('hero.subtitle') }}</p>
            </section>

            <!-- Eligible Section -->
            <section class="eligible-section">
                <h2 class="section-title">{{ t('eligibility.title') }}</h2>
                
                <div class="eligibility-cards">
                    <div class="card">
                        <img src="static/images/education.svg" alt="Official Logo" class="logo2">
                        <h6 id="h3"><i class="fas fa-graduation-cap"></i> {{ t('eligibility.education') }}</h6>
                        <p id="p">{{ t('eligibility.educationDesc') }}</p>
                    </div>
                    
                    <div class="card">
                        <img src="static/images/age.svg" alt="Official Logo" class="logo3">
                        <div id="agesz">
                        <h3><i class="fas fa-user-check"></i> {{ t('eligibility.age') }}</h3>
                        </div>
                    </div>
                    
                    <div class="card">
                        <img src="static/images/job.svg" alt="Official Logo" class="logo4">
                        <div id="jobsz">
                        <h3>{{ t('eligibility.jobStatus') }}</h3>
                        </div>
                    </div>

                    <div class="card">
                        <img src="static/images/family.svg" alt="Official Logo" class="logo5">
                        <h6>{{ t('eligibility.family') }}</h6>
                        <ul>
                            <li>
                            {{ t('eligibility.familyIncome') }}
                            </li>
                            <li>{{ t('eligibility.familyGovJob') }}</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h3>{{ t('footer.quickLinks') }}</h3>
                <ul class="footer-links">
                    <li><a href="{{ url_for('home') }}"><i class="fas fa-home"></i> {{ t('footer.home') }}</a></li>
                    <li><a href="#"><i class="fas fa-info-circle"></i> {{ t('footer.aboutUs') }}</a></li>
                    <li><a href="#"><i class="fas fa-bell"></i> {{ t('footer.notifications') }}</a></li>
                    <li><a href="#"><i class="fas fa-newspaper"></i> {{ t('footer.newsUpdates') }}</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>{{ t('footer.helpSupport') }}</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-question-circle"></i> {{ t('footer.faqs') }}</a></li>
                    <li><a href="#"><i class="fas fa-book"></i> {{ t('footer.guidelines') }}</a></li>
                    <li><a href="#"><i class="fas fa-phone-alt"></i> {{ t('footer.contactUs') }}</a></li>
                    <li><a href="#"><i class="fas fa-exclamation-circle"></i> {{ t('footer.privacyPolicy') }}</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>{{ t('footer.connectWithUs') }}</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fab fa-facebook"></i> {{ t('footer.facebook') }}</a></li>
                    <li><a href="#"><i class="fab fa-twitter"></i> {{ t('footer.twitter') }}</a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i> {{ t('footer.instagram') }}</a></li>
                    <li><a href="#"><i class="fab fa-youtube"></i> {{ t('footer.youtube') }}</a></li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            {{ t('footer.copyright') }}
        </div>
    </footer>

    <!-- Chatbot -->
  <!-- Enhanced Chatbot -->
<div class="chatbot" id="chatbot-btn">
    <i class="fas fa-comment-dots"></i>
    <div class="notification-badge" id="notification-badge">1</div>
</div>

<!-- Chat Window -->
<div id="chat-window" class="chat-window">
    <!-- Header -->
    <div class="chat-header">
        <div class="chat-header-info">
            <div class="bot-avatar">
                <i class="fas fa-robot"></i>
            </div>
            <div class="bot-details">
                <span class="bot-name">{{ t('chatbot.assistantName') }}</span>
                <span class="bot-status">{{ t('chatbot.status') }}</span>
            </div>
        </div>
        <div class="chat-controls">
            <button id="speech-toggle" class="speech-toggle-btn" title="Toggle Text-to-Speech">
                <i class="fas fa-volume-up"></i>
            </button>
            <button id="close-chat" class="close-chat-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    
    <!-- Messages Area -->
    <div id="chat-messages" class="chat-messages"></div>
    
    <!-- Quick Replies -->
    <div class="quick-replies" id="quick-replies">
        <button class="quick-reply-btn" data-message="How to apply?">{{ t('chatbot.howToApply') }}</button>
        <button class="quick-reply-btn" data-message="Eligibility criteria">{{ t('chatbot.eligibility') }}</button>
        <button class="quick-reply-btn" data-message="Stipend details">{{ t('chatbot.stipend') }}</button>
        <button class="quick-reply-btn" data-message="Contact support">{{ t('chatbot.support') }}</button>
    </div>
    
    <!-- Input Area -->
    <div class="chat-input-area">
        <input id="chat-input" type="text" placeholder="{{ t('chatbot.placeholder') }}" maxlength="500">
        <button id="voice-input" class="voice-input-btn" title="Click to speak your question">
            <i class="fas fa-microphone"></i>
        </button>
        <button id="chat-send" class="send-btn">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</div>


    <script>
        // Hamburger menu functionality for mobile
        document.querySelector('.hamburger').addEventListener('click', function() {
            const navItems = document.querySelector('.nav-items');
            navItems.style.display = navItems.style.display === 'flex' ? 'none' : 'flex';
        });

        // Adjust navigation for mobile on resize
        window.addEventListener('resize', function() {
            const navItems = document.querySelector('.nav-items');
            if (window.innerWidth > 768) {
                navItems.style.display = 'flex';
            } else {
                navItems.style.display = 'none';
            }
        });

        // Initialize for mobile view
        if (window.innerWidth <= 768) {
            document.querySelector('.nav-items').style.display = 'none';
        }
        // Add this to your existing <script> section, after your current code:

// Enhanced Chatbot Functionality
document.addEventListener('DOMContentLoaded', function() {
    const chatbotBtn = document.getElementById("chatbot-btn");
    const chatWindow = document.getElementById("chat-window");
    const closeChatBtn = document.getElementById("close-chat");
    const chatMessages = document.getElementById("chat-messages");
    const chatInput = document.getElementById("chat-input");
    const chatSend = document.getElementById("chat-send");
    const quickReplies = document.querySelectorAll('.quick-reply-btn');
    const notificationBadge = document.getElementById("notification-badge");
    const speechToggleBtn = document.getElementById("speech-toggle");
    const voiceInputBtn = document.getElementById("voice-input");

    let isOpen = false;
    let speechEnabled = true;
    let currentSpeech = null;
    let recognition = null;
    let isListening = false;

    // Text-to-Speech Functions
    function initializeSpeech() {
        if ('speechSynthesis' in window) {
            updateSpeechButton();
        } else {
            speechToggleBtn.style.display = 'none';
            console.log('Text-to-Speech not supported in this browser');
        }
    }

    function updateSpeechButton() {
        const icon = speechToggleBtn.querySelector('i');
        if (speechEnabled) {
            icon.className = 'fas fa-volume-up';
            speechToggleBtn.title = 'Disable Text-to-Speech';
            speechToggleBtn.classList.remove('muted');
        } else {
            icon.className = 'fas fa-volume-mute';
            speechToggleBtn.title = 'Enable Text-to-Speech';
            speechToggleBtn.classList.add('muted');
        }
    }

    function stopCurrentSpeech() {
        if (currentSpeech) {
            speechSynthesis.cancel();
            currentSpeech = null;
            speechToggleBtn.classList.remove('speaking');
        }
    }

    function speakText(text) {
        if (!speechEnabled || !('speechSynthesis' in window)) return;

        // Stop any current speech
        stopCurrentSpeech();

        // Clean text for speech (remove emojis and markdown-like formatting)
        const cleanText = text
            .replace(/[🎯🚀💼🌟📚👋🤖⚡💡🎓🏆✨📊🔥💪🎉🌈💼📈🎪🎭🎨🎵🎸🎹🥇🏅🎖️]/g, '')
            .replace(/\*\*(.*?)\*\*/g, '$1')
            .replace(/\*(.*?)\*/g, '$1')
            .replace(/\#+ /g, '')
            .replace(/\• /g, '')
            .replace(/\n+/g, '. ')
            .replace(/\s+/g, ' ')
            .trim();

        if (cleanText.length === 0) return;

        try {
            currentSpeech = new SpeechSynthesisUtterance(cleanText);
            
            // Configure speech settings
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.8;

            // Try to use a natural-sounding voice
            const voices = speechSynthesis.getVoices();
            const preferredVoice = voices.find(voice => 
                voice.lang.startsWith('en') && 
                (voice.name.includes('Natural') || voice.name.includes('Neural') || voice.name.includes('Enhanced'))
            ) || voices.find(voice => voice.lang.startsWith('en')) || voices[0];
            
            if (preferredVoice) {
                currentSpeech.voice = preferredVoice;
            }

            // Event handlers
            currentSpeech.onstart = () => {
                speechToggleBtn.classList.add('speaking');
            };

            currentSpeech.onend = () => {
                currentSpeech = null;
                speechToggleBtn.classList.remove('speaking');
            };

            currentSpeech.onerror = (event) => {
                console.log('Speech error:', event.error);
                currentSpeech = null;
                speechToggleBtn.classList.remove('speaking');
            };

            // Speak the text
            speechSynthesis.speak(currentSpeech);
        } catch (error) {
            console.log('Speech synthesis error:', error);
            currentSpeech = null;
            speechToggleBtn.classList.remove('speaking');
        }
    }

    // Speech toggle button event
    speechToggleBtn.addEventListener('click', () => {
        if (currentSpeech && speechSynthesis.speaking) {
            // If currently speaking, stop speech
            stopCurrentSpeech();
        } else {
            // Toggle speech enabled/disabled
            speechEnabled = !speechEnabled;
            updateSpeechButton();
            
            // Show feedback
            const feedbackText = speechEnabled ? 'Text-to-Speech enabled' : 'Text-to-Speech disabled';
            addMessage(`🔊 ${feedbackText}`, false);
        }
    });

    // Initialize speech when page loads
    initializeSpeech();

    // Ensure voices are loaded (some browsers load them asynchronously)
    if ('speechSynthesis' in window) {
        speechSynthesis.onvoiceschanged = () => {
            initializeSpeech();
        };
    }

    // Speech Recognition Functions
    function initializeSpeechRecognition() {
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            recognition.maxAlternatives = 1;

            recognition.onstart = () => {
                isListening = true;
                voiceInputBtn.classList.add('listening');
                voiceInputBtn.title = 'Listening... Click to stop';
                voiceInputBtn.querySelector('i').className = 'fas fa-microphone-slash';
                
                // Stop any current speech output
                if (currentSpeech && speechSynthesis.speaking) {
                    stopCurrentSpeech();
                }
            };

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                chatInput.value = transcript;
                chatInput.focus();
                
                // Visual feedback
                voiceInputBtn.classList.remove('listening');
                voiceInputBtn.classList.add('processing');
                voiceInputBtn.title = 'Processing...';
                voiceInputBtn.querySelector('i').className = 'fas fa-cog';
                
                setTimeout(() => {
                    voiceInputBtn.classList.remove('processing');
                    voiceInputBtn.title = 'Click to speak your question';
                    voiceInputBtn.querySelector('i').className = 'fas fa-microphone';
                    
                    // Auto-send if transcript is not empty
                    if (transcript.trim()) {
                        sendUserMessage(transcript);
                        hideQuickReplies();
                    }
                }, 200);
            };

            recognition.onerror = (event) => {
                console.log('Speech recognition error:', event.error);
                isListening = false;
                voiceInputBtn.classList.remove('listening', 'processing');
                voiceInputBtn.title = 'Click to speak your question';
                voiceInputBtn.querySelector('i').className = 'fas fa-microphone';
                
                let errorMessage = 'Voice recognition error';
                switch(event.error) {
                    case 'no-speech':
                        errorMessage = '🎤 No speech detected. Please try again.';
                        break;
                    case 'audio-capture':
                        errorMessage = '🎤 Microphone access denied. Please check permissions.';
                        break;
                    case 'not-allowed':
                        errorMessage = '🎤 Microphone permission required for voice input.';
                        break;
                    case 'network':
                        errorMessage = '🎤 Network error. Please check your connection.';
                        break;
                    default:
                        errorMessage = `🎤 Voice recognition error: ${event.error}`;
                }
                
                if (event.error !== 'aborted') {
                    addMessage(errorMessage, false);
                }
            };

            recognition.onend = () => {
                isListening = false;
                voiceInputBtn.classList.remove('listening', 'processing');
                voiceInputBtn.title = 'Click to speak your question';
                voiceInputBtn.querySelector('i').className = 'fas fa-microphone';
            };

            // Show voice input button
            voiceInputBtn.style.display = 'flex';
        } else {
            // Hide voice input button if not supported
            voiceInputBtn.style.display = 'none';
            console.log('Speech Recognition not supported in this browser');
        }
    }

    function startVoiceInput() {
        if (!recognition) return;
        
        if (isListening) {
            // Stop listening
            recognition.stop();
        } else {
            try {
                recognition.start();
            } catch (error) {
                console.log('Failed to start speech recognition:', error);
                addMessage('🎤 Unable to start voice recognition. Please try again.', false);
            }
        }
    }

    // Voice input button event
    voiceInputBtn.addEventListener('click', () => {
        startVoiceInput();
    });

    // Initialize speech recognition
    initializeSpeechRecognition();

    // Toggle chat window
    chatbotBtn.addEventListener("click", () => {
        isOpen = !isOpen;
        chatWindow.style.display = isOpen ? "flex" : "none";
        
        if (isOpen) {
            chatInput.focus();
            notificationBadge.style.display = "none";
            
            // Add welcome message if no messages exist
            if (chatMessages.children.length === 0) {
                addMessage("👋 Hello! I'm your PM Internship Assistant. How can I help you today?", false);
                showQuickReplies();
            }
        }
    });

    // Close chat
    closeChatBtn.addEventListener("click", () => {
        isOpen = false;
        chatWindow.style.display = "none";
    });

    // Quick reply buttons
    quickReplies.forEach(btn => {
        btn.addEventListener('click', () => {
            const message = btn.getAttribute('data-message');
            sendUserMessage(message);
            hideQuickReplies();
        });
    });

    // Add message function
    function addMessage(content, isUser = false) {
        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
        
        const now = new Date();
        const time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        messageDiv.innerHTML = `
            <div class="message-content">${content}</div>
            <div class="message-time">${time}</div>
        `;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Auto-speak bot messages if speech is enabled
        if (!isUser && speechEnabled) {
            // Add a small delay to let the message render
            setTimeout(() => {
                speakText(content);
            }, 100);
        }
    }

    // Show typing indicator
    function showTypingIndicator() {
        const typingDiv = document.createElement("div");
        typingDiv.className = "message bot-message";
        typingDiv.id = "typing-indicator";
        typingDiv.innerHTML = `
            <div class="typing-indicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        `;
        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Hide typing indicator
    function hideTypingIndicator() {
        const typingIndicator = document.getElementById("typing-indicator");
        if (typingIndicator) {
            typingIndicator.remove();
        }
    }

    // Show/hide quick replies
    function showQuickReplies() {
        document.getElementById('quick-replies').style.display = 'flex';
    }

    function hideQuickReplies() {
        document.getElementById('quick-replies').style.display = 'none';
    }

    // Send message function
    async function sendUserMessage(message) {
        if (!message.trim()) return;

        // Add user message
        addMessage(message, true);
        chatInput.value = "";
        chatSend.disabled = true;

        // Show typing indicator
        showTypingIndicator();

        try {
            const response = await fetch("/chat", {
                method: "POST",
                headers: { 
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ message: message })
            });

            hideTypingIndicator();

            if (response.ok) {
                const data = await response.json();
                addMessage(data.reply, false);
                
                // Show quick replies again after bot response
                setTimeout(showQuickReplies, 500);
            } else {
                addMessage("⚠️ Sorry, I encountered an error. Please try again.", false);
            }
        } catch (error) {
            hideTypingIndicator();
            addMessage("⚠️ Unable to connect. Please check your internet connection.", false);
            console.error('Chat error:', error);
        } finally {
            chatSend.disabled = false;
        }
    }

    // Send button click
    chatSend.addEventListener("click", () => {
        sendUserMessage(chatInput.value);
        hideQuickReplies();
    });

    // Enter key press
    chatInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
            e.preventDefault();
            sendUserMessage(chatInput.value);
            hideQuickReplies();
        }
    });

    // Input validation with instant feedback
    chatInput.addEventListener("input", () => {
        const message = chatInput.value.trim();
        chatSend.disabled = !message;
        
        // Visual feedback for send button
        if (message) {
            chatSend.style.opacity = '1';
            chatSend.style.transform = 'scale(1)';
        } else {
            chatSend.style.opacity = '0.6';
            chatSend.style.transform = 'scale(0.95)';
        }
    });
    
    // Initialize send button state
    chatSend.style.opacity = '0.6';
    chatSend.style.transform = 'scale(0.95)';

    // Show notification after page load
    setTimeout(() => {
        if (!isOpen) {
            notificationBadge.style.display = "flex";
        }
    }, 3000);
});

// Replace or add this to your existing script section
document.addEventListener('DOMContentLoaded', function() {
    // Language Selector Functionality
    const languageBtn = document.getElementById('languageBtn');
    const languageOptions = document.getElementById('languageOptions');
    
    console.log('Language elements:', { languageBtn, languageOptions });
    
    if (languageBtn && languageOptions) {
        console.log('Language selector initialized');
        
        languageBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Language button clicked');
            
            const isVisible = languageOptions.classList.contains('show');
            console.log('Current visibility:', isVisible);
            
            languageOptions.classList.toggle('show');
            console.log('Toggled to:', languageOptions.classList.contains('show'));
        });

        document.addEventListener('click', function(e) {
            if (!languageBtn.contains(e.target) && !languageOptions.contains(e.target)) {
                languageOptions.classList.remove('show');
            }
        });

        // Close language options when clicking a language option
        languageOptions.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', function() {
                console.log('Language option clicked:', this.textContent);
                languageOptions.classList.remove('show');
            });
        });
    } else {
        console.error('Language selector elements not found:', { languageBtn, languageOptions });
    }
});

// Simple Language Dropdown Function
function toggleLanguageDropdown() {
    console.log('Toggle function called');
    const dropdown = document.getElementById('languageDropdown');
    if (dropdown) {
        console.log('Dropdown found, current display:', window.getComputedStyle(dropdown).display);
        dropdown.classList.toggle('show');
        console.log('After toggle, has show class:', dropdown.classList.contains('show'));
    } else {
        console.error('Language dropdown not found');
    }
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('languageDropdown');
    const button = document.querySelector('.language-btn');
    
    if (dropdown && button && !button.contains(event.target) && !dropdown.contains(event.target)) {
        dropdown.classList.remove('show');
    }
});

document.addEventListener('DOMContentLoaded', function() {
    // Profile Toggle Functionality
    const profileToggle = document.getElementById('profileToggle');
    const userProfile = document.querySelector('.user-profile');
    const mainContent = document.querySelector('.main-content');

    // Toggle profile sidebar
    profileToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        userProfile.classList.toggle('active');
    });

    // Close sidebar when clicking outside
    document.addEventListener('click', function(e) {
        if (!userProfile.contains(e.target) && !profileToggle.contains(e.target)) {
            userProfile.classList.remove('active');
        }
    });

    // Handle window resize
    window.addEventListener('resize', function() {
        if (window.innerWidth > 992) {
            userProfile.classList.remove('active');
        }
    });

    // Prevent clicks inside sidebar from closing it
    userProfile.addEventListener('click', function(e) {
        e.stopPropagation();
    });
});
        // Language Selector Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const languageBtn = document.getElementById('languageBtn');
            const languageOptions = document.getElementById('languageOptions');
            
            if (languageBtn && languageOptions) {
                languageBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    languageOptions.classList.toggle('show');
                });

                document.addEventListener('click', function(e) {
                    if (!languageBtn.contains(e.target) && !languageOptions.contains(e.target)) {
                        languageOptions.classList.remove('show');
                    }
                });

                // Close language options when clicking a language option
                languageOptions.querySelectorAll('.language-option').forEach(option => {
                    option.addEventListener('click', function() {
                        languageOptions.classList.remove('show');
                    });
                });
            }
        });

    </script>
</body>
</html>
    let voiceStatus = null;

    // Initialize Speech Recognition
    function initializeSpeechRecognition() {
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            
            // Configure speech recognition
            recognition.continuous = false;
            recognition.interimResults = true;
            recognition.lang = 'en-US'; // Default language
            recognition.maxAlternatives = 1;
            
            // Event handlers
            recognition.onstart = handleSpeechStart;
            recognition.onresult = handleSpeechResult;
            recognition.onerror = handleSpeechError;
            recognition.onend = handleSpeechEnd;
            
            console.log('🎤 Speech recognition initialized');
            return true;
        } else {
            console.warn('🚫 Speech recognition not supported');
            return false;
        }
    }

    // Create voice input button
    function createVoiceButton() {
        const inputArea = document.querySelector('.chat-input-area');
        if (!inputArea) return;

        // Create voice button
        voiceBtn = document.createElement('button');
        voiceBtn.className = 'voice-input-btn';
        voiceBtn.title = 'Click to speak (Ctrl+Shift+V)';
        voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
        voiceBtn.addEventListener('click', toggleVoiceInput);
        
        // Create voice status indicator
        voiceStatus = document.createElement('div');
        voiceStatus.className = 'voice-status';
        voiceStatus.textContent = 'Listening...';
        
        // Create language indicator
        const langIndicator = document.createElement('div');
        langIndicator.className = 'lang-indicator';
        langIndicator.textContent = '🌐 EN-US';
        
        // Add elements to DOM
        inputArea.appendChild(voiceBtn);
        document.body.appendChild(voiceStatus);
        inputArea.appendChild(langIndicator);
        
        console.log('🎤 Voice button created');
    }

    // Toggle voice input
    function toggleVoiceInput() {
        if (!recognition) {
            showVoiceError('Speech recognition not available');
            return;
        }

        if (isListening) {
            stopVoiceInput();
        } else {
            startVoiceInput();
        }
    }

    // Start voice input
    function startVoiceInput() {
        if (!recognition || isListening) return;

        try {
            // Clear input field
            chatInput.value = '';
            
            // Update UI
            isListening = true;
            voiceBtn.classList.add('recording');
            voiceBtn.innerHTML = '<i class="fas fa-stop"></i>';
            voiceBtn.title = 'Stop recording';
            voiceStatus.textContent = '🎤 Listening... Speak now';
            voiceStatus.classList.add('show');
            
            // Start recognition
            recognition.start();
            console.log('🎤 Started listening');
            
        } catch (error) {
            handleSpeechError({ error: 'not-allowed' });
        }
    }

    // Stop voice input
    function stopVoiceInput() {
        if (!isListening) return;

        isListening = false;
        
        if (recognition) {
            recognition.stop();
        }
        
        // Update UI
        voiceBtn.classList.remove('recording', 'processing');
        voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
        voiceBtn.title = 'Click to speak (Ctrl+Shift+V)';
        voiceStatus.classList.remove('show');
        
        console.log('🎤 Stopped listening');
    }

    // Speech recognition event handlers
    function handleSpeechStart() {
        console.log('🎤 Speech recognition started');
        voiceStatus.textContent = '🎤 Listening... Speak clearly';
    }

    function handleSpeechResult(event) {
        let transcript = '';
        let isFinal = false;
        
        // Process results
        for (let i = event.resultIndex; i < event.results.length; i++) {
            const result = event.results[i];
            transcript += result[0].transcript;
            
            if (result.isFinal) {
                isFinal = true;
            }
        }
        
        // Update input field with interim results
        chatInput.value = transcript;
        
        // Handle final result
        if (isFinal && transcript.trim()) {
            console.log('🎤 Final transcript:', transcript);
            
            // Update UI
            voiceBtn.classList.remove('recording');
            voiceBtn.classList.add('processing');
            voiceBtn.innerHTML = '<i class="fas fa-cog"></i>';
            voiceStatus.textContent = '✅ Processing speech...';
            
            // Send message after short delay
            setTimeout(() => {
                sendUserMessage(transcript.trim());
                stopVoiceInput();
            }, 500);
        } else if (transcript.trim()) {
            // Show interim results
            voiceStatus.textContent = `🎤 "${transcript.slice(0, 30)}${transcript.length > 30 ? '...' : ''}"`;
        }
    }

    function handleSpeechError(event) {
        console.error('🎤 Speech recognition error:', event.error);
        
        let errorMessage = 'Voice input error';
        
        switch (event.error) {
            case 'not-allowed':
                errorMessage = 'Microphone access denied. Please allow microphone access.';
                break;
            case 'no-speech':
                errorMessage = 'No speech detected. Please try again.';
                break;
            case 'audio-capture':
                errorMessage = 'No microphone found. Please check your microphone.';
                break;
            case 'network':
                errorMessage = 'Network error. Please check your connection.';
                break;
            case 'service-not-allowed':
                errorMessage = 'Speech service not allowed. Please use HTTPS.';
                break;
            default:
                errorMessage = `Speech error: ${event.error}`;
        }
        
        showVoiceError(errorMessage);
        stopVoiceInput();
    }

    function handleSpeechEnd() {
        console.log('🎤 Speech recognition ended');
        
        if (isListening) {
            // Recognition ended unexpectedly, update UI
            stopVoiceInput();
        }
    }

    // Show voice error
    function showVoiceError(message) {
        // Add error message to chat
        addMessage(`🎤 ${message}`, false);
        
        // Update voice status
        voiceStatus.textContent = `❌ ${message}`;
        voiceStatus.classList.add('show');
        
        setTimeout(() => {
            voiceStatus.classList.remove('show');
        }, 3000);
    }

    // Keyboard shortcuts
    function setupKeyboardShortcuts() {
        document.addEventListener('keydown', function(e) {
            // Ctrl+Shift+V to toggle voice input
            if (e.ctrlKey && e.shiftKey && e.key === 'V') {
                e.preventDefault();
                if (isOpen && voiceBtn) {
                    toggleVoiceInput();
                }
            }
            
            // Escape to stop voice input
            if (e.key === 'Escape' && isListening) {
                stopVoiceInput();
            }
        });
    }

    // Language detection and switching
    function switchLanguage(langCode) {
        if (recognition) {
            recognition.lang = langCode;
            
            // Update language indicator
            const langIndicator = document.querySelector('.lang-indicator');
            if (langIndicator) {
                const langNames = {
                    'en-US': '🇺🇸 EN-US',
                    'hi-IN': '🇮🇳 HI-IN',
                    'es-ES': '🇪🇸 ES-ES',
                    'fr-FR': '🇫🇷 FR-FR',
                    'de-DE': '🇩🇪 DE-DE',
                    'ja-JP': '🇯🇵 JA-JP',
                    'zh-CN': '🇨🇳 ZH-CN'
                };
                langIndicator.textContent = langNames[langCode] || `🌐 ${langCode}`;
            }
            
            console.log(`🌐 Language switched to: ${langCode}`);
        }
    }

    // Auto-detect language (simplified)
    function detectLanguage(text) {
        const patterns = {
            'hi-IN': /[\u0900-\u097F]/,  // Devanagari script
            'ja-JP': /[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/,  // Hiragana, Katakana, Kanji
            'zh-CN': /[\u4E00-\u9FFF]/,  // Chinese characters
            'ar-SA': /[\u0600-\u06FF]/   // Arabic script
        };
        
        for (const [lang, pattern] of Object.entries(patterns)) {
            if (pattern.test(text)) {
                return lang;
            }
        }
        
        return 'en-US'; // Default to English
    }

    // Enhanced chat functionality (keeping your existing code)
    function toggleChat() {
        isOpen = !isOpen;
        chatWindow.style.display = isOpen ? 'flex' : 'none';
        
        if (isOpen) {
            chatInput.focus();
            notificationBadge.style.display = 'none';
            
            // Add welcome message if no messages exist
            if (chatMessages.children.length === 0) {
                addMessage('Hello! I\'m your PM Internship Assistant. How can I help you today? 🎤 You can also speak to me!', false);
                showQuickReplies();
            }
            
            // Initialize voice functionality when chat opens
            if (!voiceBtn && initializeSpeechRecognition()) {
                createVoiceButton();
            }
        }
    }

    // Your existing functions (keeping them as they are)
    function addMessage(content, isUser = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
        
        const now = new Date();
        const time = now.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
        
        messageDiv.innerHTML = `
            <div class="message-content">${content}</div>
            <div class="message-time">${time}</div>
        `;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'message bot-message';
        typingDiv.id = 'typing-indicator';
        typingDiv.innerHTML = `
            <div class="typing-indicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        `;
        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function hideTypingIndicator() {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) {
            typingIndicator.remove();
        }
    }

    function showQuickReplies() {
        document.getElementById('quick-replies').style.display = 'flex';
    }

    function hideQuickReplies() {
        document.getElementById('quick-replies').style.display = 'none';
    }

    async function sendUserMessage(message) {
        if (!message.trim()) return;
        
        // Add user message
        addMessage(message, true);
        chatInput.value = '';
        chatSend.disabled = true;
        
        // Show typing indicator
        showTypingIndicator();
        
        try {
            const response = await fetch('/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message: message })
            });
            
            hideTypingIndicator();
            
            if (response.ok) {
                const data = await response.json();
                addMessage(data.reply, false);
                
                // Show quick replies again after bot response
                setTimeout(showQuickReplies, 500);
            } else {
                addMessage('Sorry, I encountered an error. Please try again.', false);
            }
            
        } catch (error) {
            hideTypingIndicator();
            addMessage('Unable to connect. Please check your internet connection.', false);
            console.error('Chat error:', error);
        } finally {
            chatSend.disabled = false;
        }
    }

    // Event listeners
    chatbotBtn.addEventListener('click', toggleChat);
    closeChatBtn.addEventListener('click', () => {
        isOpen = false;
        chatWindow.style.display = 'none';
        if (isListening) stopVoiceInput();
    });

    // Quick reply buttons
    quickReplies.forEach(btn => {
        btn.addEventListener('click', () => {
            const message = btn.getAttribute('data-message');
            sendUserMessage(message);
            hideQuickReplies();
        });
    });

    // Send button click
    chatSend.addEventListener('click', () => {
        sendUserMessage(chatInput.value);
        hideQuickReplies();
    });

    // Enter key press
    chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            sendUserMessage(chatInput.value);
            hideQuickReplies();
        }
    });

    // Initialize send button state
    chatSend.style.opacity = '0.6';
    chatSend.style.transform = 'scale(0.95)';

    // Initialize keyboard shortcuts
    setupKeyboardShortcuts();

    // Show notification after page load
    setTimeout(() => {
        if (!isOpen) {
            notificationBadge.style.display = 'flex';
        }
    }, 3000);

    // Language switching based on page language (optional)
    const pageLanguage = document.documentElement.getAttribute('lang') || 'en';
    const speechLangMap = {
        'en': 'en-US',
        'hi': 'hi-IN',
        'mr': 'mr-IN'  // Marathi
    };
    
    if (speechLangMap[pageLanguage] && recognition) {
        setTimeout(() => {
            switchLanguage(speechLangMap[pageLanguage]);
        }, 1000);
    }
});

    </script>
</body>
</html>
